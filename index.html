<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Valentine's Day!</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{
    min-height:100vh;
    overflow:hidden;
    background:#c5cfc8;
  }

  /* Background scene */
  .bg{
    position:fixed;inset:0;z-index:1;
  }
  .bg img{width:100%;height:100%;object-fit:cover}

  /* Envelope overlay */
  .envelope{
    position:fixed;inset:0;z-index:50;
    cursor:pointer;transition:opacity 1.2s ease;
  }
  .envelope img{width:100%;height:100%;object-fit:cover}
  .envelope.hidden{opacity:0;pointer-events:none}
  .envelope-name{
    position:absolute;
    top:42%;left:50%;
    transform:translate(-50%,-50%);
    font-family:'Segoe Script','Bradley Hand','Comic Sans MS',cursive;
    font-size:clamp(28px, 5vw, 56px);
    color:#3a3028;
    letter-spacing:1px;
    pointer-events:none;
  }

  /* Card area — positioned on the bedside table */
  .card-area{
    position:fixed;z-index:10;
    left:28%;bottom:22%;
    transform:translateX(-50%) translateY(60px) scale(0.7);
    perspective:1000px;
    perspective-origin:50% 50%;
    opacity:0;pointer-events:none;transition:none;
  }
  .card-area.landed{
    transform:translateX(-50%) translateY(0) scale(1);
    opacity:1;pointer-events:auto;transition:none;
  }

  .book{
    position:relative;
    width:min(32vw, 280px);
    aspect-ratio:5/7;
    transform-style:preserve-3d;
    cursor:pointer;
    transform:rotateY(-15deg);
    transition:transform 1s cubic-bezier(.4,.0,.15,1);
  }

  /* Back panel — visible on the left like a standing card */
  .card-back{
    position:absolute;inset:0;
    transform-origin:left center;
    transform:rotateY(18deg) translateZ(-2px);
    background:linear-gradient(to right, #f0ede8, #f5f3f0);
    border-radius:4px;
    box-shadow:-2px 4px 16px rgba(0,0,0,.25);
  }

  /* Front panel */
  .card-front{
    position:absolute;inset:0;
    transform-origin:left center;
    transform:rotateY(0deg);
    transform-style:preserve-3d;
    z-index:2;
    transition:transform 1.4s cubic-bezier(.4,.0,.15,1);
  }
  .card-front img{
    width:100%;height:100%;
    object-fit:cover;
    border-radius:4px;
    box-shadow:3px 6px 16px rgba(0,0,0,.3), 1px 2px 4px rgba(0,0,0,.15);
    backface-visibility:hidden;
  }
  /* Pink inside of front cover */
  .card-front::after{
    content:'';position:absolute;inset:0;
    background:#f5a0b5;border-radius:4px;
    transform:rotateY(180deg);
    backface-visibility:hidden;
    box-shadow:-2px 4px 16px rgba(0,0,0,.2);
  }

  /* Spine */
  .spine{
    position:absolute;
    left:0;top:0;bottom:0;width:3px;
    background:linear-gradient(to right, rgba(0,0,0,.15), rgba(0,0,0,.05));
    z-index:5;
    border-radius:2px 0 0 2px;
  }

  /* Card inside message */
  .card-inside{
    position:absolute;inset:0;z-index:1;
  }
  .card-inside img{
    width:100%;height:100%;
    object-fit:cover;border-radius:4px;
    box-shadow:3px 6px 20px rgba(0,0,0,.3);
  }

  /* Contact shadow on the table */
  .book::before{
    content:'';position:absolute;
    bottom:-5px;left:0;right:5%;
    height:14px;
    background:radial-gradient(ellipse at 30% 50%, rgba(0,0,0,.45) 0%, rgba(0,0,0,.15) 40%, transparent 70%);
    border-radius:50%;filter:blur(4px);
    transition:all 1.4s ease;
  }

  /* STANDING state */
  .book.standing{
    transform:rotateX(-2deg) rotateY(-18deg) rotateZ(0deg) scale(1.3);
  }
  /* DISPLAYED state */
  .book.displayed{
    transform:rotateX(-2deg) rotateY(-18deg) rotateZ(0deg) scale(0.9);
  }

  /* OPEN state */
  .book.open{
    transform:rotateX(-6deg) rotateY(0deg) scale(1.4);
  }
  .book.open .card-front{
    transform:rotateY(-160deg);
  }
  .book.open .card-back{
    transform:rotateY(0deg);
  }
  .book.open::before{
    left:-40%;right:5%;
    bottom:-7px;height:18px;
  }

  /* Hint */
  .hint{
    position:fixed;top:65%;right:12%;
    font-family:-apple-system,sans-serif;font-size:13px;color:rgba(255,255,255,.8);
    animation:pulse 2.5s ease-in-out infinite;transition:all .5s;
    z-index:60;text-shadow:0 1px 6px rgba(0,0,0,.9);white-space:nowrap;
  }
  .hint.centered{
    top:auto;right:auto;
    bottom:10%;left:50%;
    transform:translateX(-50%);
    font-size:15px;
    color:#fff;
    text-shadow:none;
    letter-spacing:0.5px;
    background:rgba(0,0,0,.55);
    padding:6px 16px;
    border-radius:20px;
    backdrop-filter:blur(4px);
    -webkit-backdrop-filter:blur(4px);
  }
  .hint.hide{opacity:0}
  @keyframes pulse{0%,100%{opacity:.35}50%{opacity:.8}}

  /* Landing animation */
  @keyframes landOnTable{
    0%{
      opacity:0;
      transform:var(--land-x, translateX(-50%)) translateY(-120px) scale(0.6) rotate(-3deg);
    }
    40%{
      opacity:1;
      transform:var(--land-x, translateX(-50%)) translateY(8px) scale(1.02) rotate(0.5deg);
    }
    65%{
      transform:var(--land-x, translateX(-50%)) translateY(-4px) scale(0.99) rotate(-0.3deg);
    }
    85%{
      transform:var(--land-x, translateX(-50%)) translateY(2px) scale(1.005) rotate(0deg);
    }
    100%{
      opacity:1;
      transform:var(--land-x, translateX(-50%)) translateY(0) scale(1) rotate(0deg);
    }
  }
  .card-area.arriving{
    animation:landOnTable 1.2s cubic-bezier(.22,.68,.36,1) forwards;
    pointer-events:none;
  }

  /* Responsive — mobile portrait */
  @media (max-width:600px){
    .book{width:50vw}
    .card-area{--land-x:translateX(-50%);bottom:18%;left:50%;transform:translateX(-50%)}
    .card-area.landed{transform:translateX(-50%) translateY(0) scale(1)}
    .book.standing{transform:rotateX(-4deg) rotateY(-12deg) scale(1.2)}
    .book.displayed{transform:rotateX(-4deg) rotateY(-12deg) scale(0.95)}
    .book.open{transform:rotateX(-6deg) rotateY(0deg) scale(1.3)}
    .hint.centered{bottom:8%}
  }
  /* Landscape phones / small tablets */
  @media (max-height:500px){
    .card-area{bottom:10%}
    .book{width:28vh}
    .hint.centered{bottom:4%}
  }
  @media (min-width:1400px){
    .book{width:280px}
  }
</style>
</head>
<body>

<div class="bg">
  <img src="AdobeStock_584165517.jpeg" alt="bedside scene">
</div>

<div class="envelope" id="envelope">
  <img src="envelope.jpeg" alt="envelope on table">
  <span class="envelope-name">Snoopy</span>
</div>

<div class="card-area" id="cardArea">
  <div class="book" id="book">
    <div class="card-back"></div>
    <div class="card-front">
      <img src="Untitled-1.png" alt="Happy Valentine's Day card front">
    </div>
    <div class="card-inside">
      <img src="Untitled-2.png" alt="card message inside">
    </div>
    <div class="spine"></div>
  </div>
</div>

<div class="hint" id="hint">tap the envelope</div>

<script>
const envelope = document.getElementById('envelope');
const cardArea = document.getElementById('cardArea');
const book = document.getElementById('book');
const hint = document.getElementById('hint');
let step = 0;
let cardOpen = false;

envelope.addEventListener('click', () => {
  if (step !== 0) return;
  envelope.classList.add('hidden');
  hint.classList.add('hide');
  setTimeout(() => {
    cardArea.classList.add('arriving');
  }, 800);
  cardArea.addEventListener('animationend', () => {
    cardArea.classList.remove('arriving');
    cardArea.classList.add('landed');
    setTimeout(() => {
      book.classList.add('standing');
    }, 300);
    setTimeout(() => {
      book.classList.remove('standing');
      book.classList.add('displayed');
      hint.textContent = 'tap the card to open';
      hint.classList.add('centered');
      hint.classList.remove('hide');
      step = 1;
    }, 2500);
  }, {once: true});
});

book.addEventListener('click', () => {
  if (step < 1) return;
  if (!cardOpen) {
    book.classList.add('open');
    setTimeout(() => {
      hint.textContent = 'tap to close';
      hint.classList.remove('hide');
    }, 1500);
    cardOpen = true;
  } else {
    book.classList.remove('open');
    hint.classList.add('hide');
    cardOpen = false;
    setTimeout(() => {
      hint.textContent = 'tap to open again';
      hint.classList.remove('hide');
    }, 1500);
  }
});
</script>
</body>
</html>
